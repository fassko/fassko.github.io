<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Kristaps Grinbergs"/><link rel="canonical" href="https://kristaps.me/blog/swiftui-mapview"/><meta name="twitter:url" content="https://kristaps.me/blog/swiftui-mapview"/><meta name="og:url" content="https://kristaps.me/blog/swiftui-mapview"/><title>Mapview with SwiftUI | Kristaps Grinbergs</title><meta name="twitter:title" content="Mapview with SwiftUI | Kristaps Grinbergs"/><meta name="og:title" content="Mapview with SwiftUI | Kristaps Grinbergs"/><meta name="description" content="Finding places, navigating our way, or simply checking what's around - these are essential things that smartphones can help with. This year Apple added maps functionality to the SwiftUI framework. Let's check out how we can use it and what are the current problems."/><meta name="twitter:description" content="Finding places, navigating our way, or simply checking what's around - these are essential things that smartphones can help with. This year Apple added maps functionality to the SwiftUI framework. Let's check out how we can use it and what are the current problems."/><meta name="og:description" content="Finding places, navigating our way, or simply checking what's around - these are essential things that smartphones can help with. This year Apple added maps functionality to the SwiftUI framework. Let's check out how we can use it and what are the current problems."/><meta name="og:site_name" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:title" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:description" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:image" content="https://kristaps.me/og-image.png"/><meta name="og:image:secure_url" content="https://kristaps.me/og-image.png"/><meta name="og:type" content="website"/><meta name="og:url" content="https://kristaps.me"/><meta name="og:image:secure_url" content="https://kristaps.me/og-image.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@fassko"/><meta name="twitter:title" content="Kristaps Grinbergs"/><meta name="twitter:description" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="twitter:image" content="fb-og.png"/><link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-HBCE3H3QVL"></script><script src="/scripts/ga.js"></script><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Kristaps Grinbergs"/></head><body><header class="header"><div class="header-wrapper"><div class="main-title"><a href="/">Kristaps Grinbergs</a></div><nav class="nav-container"><nav><ul class="nav"><li class="nav-item"><a href="/">home</a></li><li class="nav-item"><a href="/blog">blog</a></li><li class="nav-item"><a href="/talks">talks</a></li><li class="nav-item"><a href="/about">about</a></li></ul></nav></nav></div></header><div class="wrapper"><section class="blog-list"><div class="blog-item"><h1><a class="blog-title" href="/blog/swiftui-mapview">Mapview with SwiftUI</a></h1><div class="blog-date"><ul class="blog-tags"><li><a href="/tags/swiftui">swiftui</a></li><li><a href="/tags/swift">swift</a></li><li><a href="/tags/apple">apple</a></li><li><a href="/tags/ios">ios</a></li></ul>Jul 27, 2020</div><div class="blog-content"><p>Finding places, navigating our way, or simply checking what's around - these are essential things that smartphones can help with. This year Apple added maps functionality to the SwiftUI framework. Let's check out how we can use it and what are the current problems.</p><blockquote><p>I would like to point out that this covers Xcode 12 beta software and it can change in future releases.</p></blockquote><h2>Present the MapView</h2><p>To show MapView we need to use MapKit's structure <code>Map</code> that is specifically designed to use with SwiftUI. It is a view that displays an embedded map interface. We can use it to configure user-allowed interactions, show and track current location, and add annotations on the map.</p><p>It comes with several <a href="https://developer.apple.com/documentation/mapkit/map">initialize methods</a>. Let's see how to create a map specifying the map visible map region and add annotations.</p><p>The coordinate region defines the area that is visible on the map. It is a <code>Binding</code> that takes an <code>MKCoordinateRegion</code> object that is a combination of center coordinate and a coordinate span around it.</p><pre><code><span class="keyword">struct</span> MapView: <span class="type">View</span> {
  <span class="keyword">@State var</span> coordinateRegion = <span class="type">MKCoordinateRegion</span>(
    center: <span class="type">CLLocationCoordinate2D</span>(latitude: <span class="number">56.948889</span>, longitude: <span class="number">24.106389</span>),
    span: <span class="type">MKCoordinateSpan</span>(latitudeDelta: <span class="number">0.2</span>, longitudeDelta: <span class="number">0.2</span>))
  
  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">Map</span>(coordinateRegion: <span class="property">$coordinateRegion</span>)
      .<span class="call">edgesIgnoringSafeArea</span>(.<span class="dotAccess">all</span>)
  }
}
</code></pre><p>Now we have a map showing the capital city of Latvia - Riga. With this init method we can specify other things like interaction capabilities, showing user location, and more.</p><img src="/assets/img/swiftui-map/mapview.png" alt="SwiftUI Map view"/><h2>Add annotations on the map</h2><p>If we want to add annotation on the map we need to use a different initializer method that takes <code>MKCoordinateRegion</code>, identifiable collection of annotations and block that creates returns <code>MapAnnotationProtocol</code> protocol object.</p><p>Right now MapKit offers three simple annotation views:</p><ul><li><code>MapPin</code> - pin-shaped annotation</li><li><code>MapMarker</code> - balloon-shaped annotation</li><li><code>MapAnnoation</code> - custom view annoation</li></ul><p>The simplest way is to use the first two annotation types, in this blog post we're going to look into <code>MapMarker</code> annotation type. To <a href="https://developer.apple.com/documentation/mapkit/mapmarker/3601335-init">initalize</a> need to pass a coordinate and optional tint color.</p><pre><code><span class="type">MapMarker</span>(coordinate: place.<span class="property">coordinate</span>, tint: .<span class="dotAccess">green</span>)
</code></pre><p>By putting it all together, we can show couple of annoations on the map like this:</p><pre><code><span class="keyword">struct</span> MapViewWithAnnotations: <span class="type">View</span> {
  <span class="keyword">let</span> veganPlacesInRiga = [
    <span class="type">VeganFoodPlace</span>(name: <span class="string">"Kozy Eats"</span>, latitude: <span class="number">56.951924</span>, longitude: <span class="number">24.125584</span>),
    <span class="type">VeganFoodPlace</span>(name: <span class="string">"Green Pumpkin"</span>, latitude:  <span class="number">56.967520</span>, longitude: <span class="number">24.105760</span>),
    <span class="type">VeganFoodPlace</span>(name: <span class="string">"Terapija"</span>, latitude: <span class="number">56.9539906</span>, longitude: <span class="number">24.13649290000000</span>)
  ]
  
  <span class="keyword">@State var</span> coordinateRegion = <span class="type">MKCoordinateRegion</span>(
    center: <span class="type">CLLocationCoordinate2D</span>(latitude: <span class="number">56.948889</span>, longitude: <span class="number">24.106389</span>),
    span: <span class="type">MKCoordinateSpan</span>(latitudeDelta: <span class="number">0.2</span>, longitudeDelta: <span class="number">0.2</span>))
  
  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">Map</span>(coordinateRegion: <span class="property">$coordinateRegion</span>,
        annotationItems: veganPlacesInRiga) { place <span class="keyword">in</span>
      <span class="type">MapMarker</span>(coordinate: place.<span class="property">coordinate</span>, tint: .<span class="dotAccess">green</span>)
    }.<span class="call">edgesIgnoringSafeArea</span>(.<span class="dotAccess">all</span>)
  }
}
</code></pre><p>Let's not forget those collection elements should conform to <code>Identifiable</code> - provide <code>ID</code> value. The easiest way is to just use the <code>UUID</code> like this:</p><pre><code><span class="keyword">struct</span> VeganFoodPlace: <span class="type">Identifiable</span> {
  <span class="keyword">var</span> id = <span class="type">UUID</span>()
  <span class="keyword">let</span> name: <span class="type">String</span>
  <span class="keyword">let</span> latitude: <span class="type">Double</span>
  <span class="keyword">let</span> longitude: <span class="type">Double</span>
  
  <span class="keyword">var</span> coordinate: <span class="type">CLLocationCoordinate2D</span> {
    <span class="type">CLLocationCoordinate2D</span>(latitude: latitude, longitude: longitude)
  }
}
</code></pre><p>As we see that there is no way how to initialize an annotation with the title right now. For that, we need to use <code>MapAnnotation</code> that allows us to create custom map annotation.</p><h2>Current drawbacks</h2><p>Adding Map view with SwiftUI is a very straight forward task, but current implementation lacks some important components. Let's discuss some of the drawbacks.</p><p>Adding a callout view for map annotation is one of the most essential things that is lacking with the current implementation.</p><p>After clicking on an annotation and showing a callout usually, there is the navigation or a modal view is presented. With a custom <code>MapAnnoation</code> we can partially do it, but for sure it is not a great solution.</p><p>Right now you can add only add annotations on the map. There isn't support for polyline or other elements.<br>## TL;DR</p><p>Adding Map view with SwiftUI is simple. It comes with ways to add binding to the map region, specify annotation list, track user's location, and more. Sadly with current Xcode Beta 3, it lacks features like showing titles for annotations, callout view, and SwiftUI way of navigation. Let's hope Apple will add it in the future.</p><h2>Links</h2><ul><li><a href="Map official documentation">https://developer.apple.com/documentation/mapkit/map</a></li><li><a href="Hacking with Swift article">https://www.hackingwithswift.com/quick-start/swiftui/how-to-show-a-map-view</a></li><li><a href="SwiftUI Map view implementation">https://github.com/fassko/RigaVeganMap</a></li><li><a href="Using MapKit with SwiftUI">https://swiftwithmajid.com/2020/07/29/using-mapkit-with-swiftui/</a></li><li><a href="Adventures in SwiftUI 2's MapKit support">https://codakuma.com/swiftui-mapkit-fun/</a></li></ul></div></div></section></div><footer class="footer"><p>Copyright © Kristaps Grinbergs. 2025.</p><p><a href="https://twitter.com/fassko" target="_blank">Twitter</a>•<a href="/feed.rss">RSS</a>•<a href="/about">Contact</a></p></footer></body></html>