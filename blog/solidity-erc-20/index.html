<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Kristaps Grinbergs"/><link rel="canonical" href="https://kristaps.me/blog/solidity-erc-20"/><meta name="twitter:url" content="https://kristaps.me/blog/solidity-erc-20"/><meta name="og:url" content="https://kristaps.me/blog/solidity-erc-20"/><title>Exploring ERC20 fungible token standard in Solidity | Kristaps Grinbergs</title><meta name="twitter:title" content="Exploring ERC20 fungible token standard in Solidity | Kristaps Grinbergs"/><meta name="og:title" content="Exploring ERC20 fungible token standard in Solidity | Kristaps Grinbergs"/><meta name="description" content="This time let's talk about fungible tokens, one of the main building blocks in DeFi. These tokens can represent coins, gold, grain, and other assets that can be exchanged for them. We will look into one of the first Ethereum Improvement Proposal with number 20. This token standard is widely known as ERC20 and describes an interface for tokens within smart contracts. Functions like token transferring, approving spending, creating, and others are defined by this ERC20 standard."/><meta name="twitter:description" content="This time let's talk about fungible tokens, one of the main building blocks in DeFi. These tokens can represent coins, gold, grain, and other assets that can be exchanged for them. We will look into one of the first Ethereum Improvement Proposal with number 20. This token standard is widely known as ERC20 and describes an interface for tokens within smart contracts. Functions like token transferring, approving spending, creating, and others are defined by this ERC20 standard."/><meta name="og:description" content="This time let's talk about fungible tokens, one of the main building blocks in DeFi. These tokens can represent coins, gold, grain, and other assets that can be exchanged for them. We will look into one of the first Ethereum Improvement Proposal with number 20. This token standard is widely known as ERC20 and describes an interface for tokens within smart contracts. Functions like token transferring, approving spending, creating, and others are defined by this ERC20 standard."/><meta name="og:site_name" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:title" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:description" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:image" content="https://kristaps.me/og-image.png"/><meta name="og:image:secure_url" content="https://kristaps.me/og-image.png"/><meta name="og:type" content="website"/><meta name="og:url" content="https://kristaps.me"/><meta name="og:image:secure_url" content="https://kristaps.me/og-image.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@fassko"/><meta name="twitter:title" content="Kristaps Grinbergs"/><meta name="twitter:description" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="twitter:image" content="fb-og.png"/><link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-HBCE3H3QVL"></script><script src="/scripts/ga.js"></script><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Kristaps Grinbergs"/></head><body><header class="header"><div class="header-wrapper"><div class="main-title"><a href="/">Kristaps Grinbergs</a></div><nav class="nav-container"><nav><ul class="nav"><li class="nav-item"><a href="/">home</a></li><li class="nav-item"><a href="/blog">blog</a></li><li class="nav-item"><a href="/talks">talks</a></li><li class="nav-item"><a href="/about">about</a></li></ul></nav></nav></div></header><div class="wrapper"><section class="blog-list"><div class="blog-item"><h1><a class="blog-title" href="/blog/solidity-erc-20">Exploring ERC20 fungible token standard in Solidity</a></h1><div class="blog-date"><ul class="blog-tags"><li><a href="/tags/solidity">Solidity</a></li><li><a href="/tags/web3">web3</a></li><li><a href="/tags/erc20">ER-C20</a></li></ul>Sep 5, 2022</div><div class="blog-content"><p>This time let's talk about fungible tokens, one of the main building blocks in DeFi. These tokens can represent coins, gold, grain, and other assets that can be exchanged for them. We will look into one of the first Ethereum Improvement Proposal with number 20. This token standard is widely known as ERC20 and describes an interface for tokens within smart contracts. Functions like token transferring, approving spending, creating, and others are defined by this ERC20 standard.</p><p>To illustrate the ERC20 standard in code, we will use <a href="https://docs.openzeppelin.com/contracts/4.x/erc20">OpenZepplin ERC20</a> implementation.</p><h2>Minting and burning</h2><p>There are two main actions with total token supply. We can use either mint or burn them. Minting means creating more supply, and burning means decreasing supply once we need to do so.</p><h3>Minting</h3><p>To create a token supply, we need to mint this amount. When we are minting behind, the scenes caller that calls this function receives provided amount of tokens.</p><p>Let's create a smart contract that would act as an ERC20 token. In the constructor, we need to provide the total token supply and call OpenZepplin's <code>ERC20</code> implementation constructor, providing the token name and symbol.</p><pre><code>contract <span class="type">FungibleToken</span> <span class="keyword">is</span> <span class="type">ERC20</span> {
  <span class="call">constructor</span>(uint256 totalSupply) <span class="type">ERC20</span>(<span class="string">"MyBestToken"</span>, <span class="string">"BTKN"</span>) {
    <span class="call">_mint</span>(msg.<span class="property">sender</span>, totalSupply);
  }
</code></pre><p>When we want to deploy this contract, we should provide the <code>totalSupply</code>. I want to mention that we are using <a href="https://remix-project.org/">Remix development IDE</a>.</p><img src="/assets/solidity-erc20/deploy-mint-tokens.png" alt="Deploy and mint tokens"/><p>We can issue more tokens if that is needed by minting more.</p><h3>Burning</h3><p>When we need to decrease the value of total tokens available in circulation, we can burn them. Token burning means that we send a specific number of tokens to zero address <code>0x0000000000000000000000000000000000000000</code>, and it is locked forever because nobody has an access to this address.</p><pre><code>function <span class="call">burn</span>(uint256 burnAmount) <span class="call">external</span> {
    <span class="call">_burn</span>(msg.<span class="property">sender</span>, burnAmount);
  }
</code></pre><p>To burn tokens, we need to pass the address that is the same that minted the tokens and the amount we want to burn.</p><h2>Utility functions</h2><p>A couple of utility functions from the ERC20 standard helps us to find token information and balances.</p><h3>Token information</h3><p>Once the smart contract is deployed on the chain, anyone can see the name, symbol, and decimals. The only thing that is needed is the token smart contract address.</p><img src="/assets/solidity-erc20/token-information.png" alt="Token information"/><h3>Balances</h3><p>ERC20 standard, in essence, holds the mapping of addresses and the amount it has. It means that at any given time, we can ask balance of the specific address. It is publicly visible and accessible. Of course, we don't know who is behind this address, nor can we change the amount.</p><img src="/assets/solidity-erc20/erc20-balance.png" alt="Token balance"/><p>Behind the scenes, the ERC20 OpenZepplin standard keeps balances in a mapping where the key is an address, and the value is <code>uint256</code>. No magic at all.</p><pre><code><span class="call">mapping</span>(address =&gt; uint256) <span class="keyword">private</span> _balances;
</code></pre><h2>Transfers</h2><p>I lied a bit when I told you that we couldn't change the amount of tokens that an address holds. We can transfer tokens to an address or give transfer rights to an address. Transfer rights mean we give rights to another address to spend a concrete amount of tokens on our behalf.</p><h3>Transfer tokens</h3><p>Once we hold an amount of ERC20 tokens, we can send it not exceeding the total amount to any address. That also includes zero address <code>0x0000000000000000000000000000000000000000</code> which technically means burning.</p><img src="/assets/solidity-erc20/erc20-transfer.png" alt="ERC20 transfer"/><p>In the ERC20 implementation, it is described that once we transfer tokens, amount we send is deducted from our balance and increased for the address we send it to. It checks if we have enough tokens to transfer and if we're not exceeding our balance. Remember, we are constantly working with the token amount balance sheet.</p><h3>Transfer tokens on behalf</h3><p>Giving transfer rights to someone else might sound complicated, but it is widely used in DeFi, where we provide Ethereum smart contract rights to operate with our tokens. For instance, smart contract swaps tokens put them in a liquidity pool, or we want to take a loan providing collateral for our tokens.</p><p>First, we need to give the rights to an address and provide what will be the maximum amount that it can operate with. ERC20 implementation will also check if we are not exceeding available tokens and reserve token allowance in internal mapping.</p><pre><code><span class="call">mapping</span>(address =&gt; <span class="call">mapping</span>(address =&gt; uint256)) <span class="keyword">private</span> _allowances;
</code></pre><p>This mapping key is the address of the token holder. Then the value is another mapping where the key is the spender address and amount allowed to spend.</p><img src="/assets/solidity-erc20/erc20-approve.png" alt="ERC20 transfer"/><p>After giving spending rights, we can decrease or increase the allowance for the spender.</p><p>Now the spender can send our reserved token amount to any other address providing the token holder address, address sending to, and token amount to be transferred.</p><img src="/assets/solidity-erc20/erc20-transfer-from.png" alt="ERC20 transfer from"/><p>In the ERC20 standard implementation, allowances and balances are being changed accordingly. The spender allowance is decreased by the provided token amount, and the receiver's balance is increased.</p><h2>TL;DR</h2><p>ERC20 is one of the first standards within Ethereum Improvement proposals. It describes a smart contract that holds fungible token balances and transfers between addresses. It also talks about additional features like allowing to spend on behalf of the token holder. It is the gold standard for tokens on EVM chains.</p><h2>Links</h2><ul><li><a href="https://gist.github.com/fassko/9a25b7249394cf20625d705364ff469b">Sample code</a></li></ul><ul><li><a href="https://eips.ethereum.org/EIPS/eip-20">EIP-20: Token Standard</a></li><li><a href="https://ethereum.org/en/developers/docs/standards/tokens/erc-20/">ERC-20 - Ethereum documentation</a></li><li><a href="https://www.investopedia.com/news/what-erc20-and-what-does-it-mean-ethereum/">ERC-20 by Investopedia</a></li><li><a href="https://docs.openzeppelin.com/contracts/4.x/erc20">ERC20 - OpenZepplin documentation</a></li><li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol">ERC20 - OpenZepplin implementation</a></li><li><a href="https://github.com/solidstate-network/solidstate-solidity/blob/master/contracts/token/ERC20/SolidStateERC20.sol">SolidState ERC20 implementation</a></li></ul></div></div></section></div><footer class="footer"><p>Copyright © Kristaps Grinbergs. 2025.</p><p><a href="https://twitter.com/fassko" target="_blank">Twitter</a>•<a href="/feed.rss">RSS</a>•<a href="/about">Contact</a></p></footer></body></html>