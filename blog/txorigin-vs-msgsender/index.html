<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Kristaps Grinbergs"/><link rel="canonical" href="https://kristaps.me/blog/txorigin-vs-msgsender"/><meta name="twitter:url" content="https://kristaps.me/blog/txorigin-vs-msgsender"/><meta name="og:url" content="https://kristaps.me/blog/txorigin-vs-msgsender"/><title>Understanding tx.origin and msg.sender in Solidity | Kristaps Grinbergs</title><meta name="twitter:title" content="Understanding tx.origin and msg.sender in Solidity | Kristaps Grinbergs"/><meta name="og:title" content="Understanding tx.origin and msg.sender in Solidity | Kristaps Grinbergs"/><meta name="description" content="Developers need to understand the difference between `tx.origin` and `msg.sender` in Solidity. These two global variables often need clarification with each other despite their fundamental differences. While they may appear similar at first glance, `tx.origin` and `msg.sender` represent distinct addresses in the context of a transaction. In this blog post, we will delve deeper into the meanings of each of these variables."/><meta name="twitter:description" content="Developers need to understand the difference between `tx.origin` and `msg.sender` in Solidity. These two global variables often need clarification with each other despite their fundamental differences. While they may appear similar at first glance, `tx.origin` and `msg.sender` represent distinct addresses in the context of a transaction. In this blog post, we will delve deeper into the meanings of each of these variables."/><meta name="og:description" content="Developers need to understand the difference between `tx.origin` and `msg.sender` in Solidity. These two global variables often need clarification with each other despite their fundamental differences. While they may appear similar at first glance, `tx.origin` and `msg.sender` represent distinct addresses in the context of a transaction. In this blog post, we will delve deeper into the meanings of each of these variables."/><meta name="og:site_name" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:title" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:description" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="og:image" content="https://kristaps.me/og-image.png"/><meta name="og:image:secure_url" content="https://kristaps.me/og-image.png"/><meta name="og:type" content="website"/><meta name="og:url" content="https://kristaps.me"/><meta name="og:image:secure_url" content="https://kristaps.me/og-image.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@fassko"/><meta name="twitter:title" content="Kristaps Grinbergs"/><meta name="twitter:description" content="Kristaps Grinbergs - Blockchain, mobile and fullstack developer. Startup founder. Conference speaker. Mentor. Passionate about building products, sustainability and Web 3.0"/><meta name="twitter:image" content="fb-og.png"/><link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-HBCE3H3QVL"></script><script src="/scripts/ga.js"></script><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Kristaps Grinbergs"/></head><body><header class="header"><div class="header-wrapper"><div class="main-title"><a href="/">Kristaps Grinbergs</a></div><nav class="nav-container"><nav><ul class="nav"><li class="nav-item"><a href="/">home</a></li><li class="nav-item"><a href="/blog">blog</a></li><li class="nav-item"><a href="/talks">talks</a></li><li class="nav-item"><a href="/about">about</a></li></ul></nav></nav></div></header><div class="wrapper"><section class="blog-list"><div class="blog-item"><h1><a class="blog-title" href="/blog/txorigin-vs-msgsender">Understanding tx.origin and msg.sender in Solidity</a></h1><div class="blog-date"><ul class="blog-tags"><li><a href="/tags/ethereum">ethereum</a></li><li><a href="/tags/solidity">solidity</a></li></ul>Jan 6, 2024</div><div class="blog-content"><p>Developers need to understand the difference between <code>tx.origin</code> and <code>msg.sender</code> in Solidity. These two global variables often need clarification with each other despite their fundamental differences. While they may appear similar at first glance, <code>tx.origin</code> and <code>msg.sender</code> represent distinct addresses in the context of a transaction. In this blog post, we will delve deeper into the meanings of each of these variables.</p><h2>What is <code>tx.origin</code>?</h2><p>In Solidity, <code>tx.origin</code> identifies the original sender of a transaction. It points to the external account initiating the transaction and remains constant throughout subsequent smart contract interactions (full call chain).</p><p>When a transaction is initiated through the MetaMask wallet, the address of the user's MetaMask wallet is stored in <code>tx.origin</code>. This address remains the same, even if the transaction passes through multiple contracts. The consistency of this address is essential for tracing the initial sender of the transaction.</p><h2>What is <code>msg.sender</code>?</h2><p>In smart contract development, <code>msg.sender</code> identifies the sender of the current call. This variable is dynamic and can change throughout the transaction process.</p><p>When a transaction moves through several smart contracts, the <code>msg.sender</code> value changes to indicate the most recent contract address in the call chain. For example, if Contract A calls Contract B, then the <code>msg.sender</code> value within Contract B will be recognized as Contract A.</p><h2>Coding it up</h2><p>To demonstrate how the <code>tx.origin</code> and <code>msg.sender</code> change between smart contract calls, we will create an <code>EntryContract</code> smart contract that references the <code>UnderlyingContract</code> contract.</p><p>Let's add a <code>printTxOriginAndMsgSender</code> function that prints each address.</p><p>Here we have the <code>Entry</code> smart contract:</p><pre><code>contract <span class="type">EntryContract</span> {
  <span class="type">IUnderlyingContract</span> <span class="keyword">private</span> underlyingContract;

  <span class="call">constructor</span>(<span class="type">IUnderlyingContract</span> _underlyingContract) {
    underlyingContract = _underlyingContract;
  }

  function <span class="call">printTxOriginAndMsgSender</span>() <span class="keyword">public</span> view {
    console.<span class="call">log</span>(<span class="string">"tx.origin"</span>, tx.<span class="property">origin</span>);
    console.<span class="call">log</span>(<span class="string">"msg.sender"</span>, msg.<span class="property">sender</span>);
  }

  function <span class="call">callUnderlyingContract</span>() <span class="call">external</span> {
    underlyingContract.<span class="call">printTxOriginAndMsgSender</span>();
  }
}
</code></pre><p>Now let's define the <code>UnderlyingContract</code> and it's interface:</p><pre><code>interface <span class="type">IUnderlyingContract</span> {
  function <span class="call">printTxOriginAndMsgSender</span>() external ;
}

contract <span class="type">UnderlyingContract</span> <span class="keyword">is</span> <span class="type">IUnderlyingContract</span> {
  function <span class="call">printTxOriginAndMsgSender</span>() external <span class="call">view</span> {
    console.<span class="call">log</span>(<span class="string">"tx.origin"</span>, tx.<span class="property">origin</span>);
    console.<span class="call">log</span>(<span class="string">"msg.sender"</span>, msg.<span class="property">sender</span>);
  }
}
</code></pre><p>To execute the test, we must first deploy the <code>UnderlyingContract</code> and use its address when deploying the <code>EntryContract</code>.</p><p>When we call the <code>printTxOriginAndMsgSender</code> function of the <code>EntryContract</code> contract, we see that both addresses are the same.</p><img src="/assets/tx.origin-vs-msg.sender/tx.origin-msg.sender-same.png" alt="tx.origin and msg.sender are the same"/><p>Let's call the <code>callUnderlyingContract</code> function on the <code>EntryContract</code> contract. We can see that <code>tx.origin</code> and <code>msg.sender</code> are different now. <code>tx.origin</code> is the original caller address and <code>msg.sender</code> is the <code>EntryContract</code> smart contract address.</p><img src="/assets/tx.origin-vs-msg.sender/tx.origin-msg.sender-not-same.png" alt="tx.origin and msg.sender are not the same"/><h2>TL;DR</h2><p>In Solidity, <code>tx.origin</code> and <code>msg.sender</code> are two variables that serve different but crucial purposes. <code>tx.origin</code> always refers to the address that initially initiated the transaction and remains constant throughout the transaction chain. On the other hand, <code>msg.sender</code> represents the sender of the current message or contract interaction and changes with each call. It is crucial to be cautious when using <code>msg.sender</code>, as it may not always represent the initial caller of the transaction.</p><h2>Links</h2><ul><li><a href="https://gist.github.com/fassko/814206e679499e5ce465fcead119ee55">Demo code</a></li></ul><ul><li><a href="https://docs.soliditylang.org/en/v0.8.23/units-and-global-variables.html#block-and-transaction-properties">Solidity documentation: Special Variables and Functions</a></li><li><a href="https://docs.soliditylang.org/en/v0.8.23/cheatsheet.html#block-and-transaction-properties">Solidity documentation: Block and Transaction Properties</a></li><li><a href="https://solidity101.substack.com/p/unraveling-solidity-mysteries-demystifying">Unraveling Solidity Mysteries: Demystifying tx.origin and msg.sender</a></li></ul></div></div></section></div><footer class="footer"><p>Copyright © Kristaps Grinbergs. 2025.</p><p><a href="https://twitter.com/fassko" target="_blank">Twitter</a>•<a href="/feed.rss">RSS</a>•<a href="/about">Contact</a></p></footer></body></html>