<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Kristaps Grinbergs"/><link rel="canonical" href="https://kristaps.me/blog/swiftui-modal-view"/><meta name="twitter:url" content="https://kristaps.me/blog/swiftui-modal-view"/><meta name="og:url" content="https://kristaps.me/blog/swiftui-modal-view"/><title>How to deal with modal views (a.k.a. sheets) with SwiftUI | Kristaps Grinbergs</title><meta name="twitter:title" content="How to deal with modal views (a.k.a. sheets) with SwiftUI | Kristaps Grinbergs"/><meta name="og:title" content="How to deal with modal views (a.k.a. sheets) with SwiftUI | Kristaps Grinbergs"/><meta name="description" content="When presenting a small piece of extra information on the screen, showing a modal view is essential. With UIKit, we could do this with `presentViewController:animated:completion:` [function](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621380-presentviewcontroller). However, using SwiftUI, we need to twist our thinking towards using view or environment state, as the modal view is now called a sheet."/><meta name="twitter:description" content="When presenting a small piece of extra information on the screen, showing a modal view is essential. With UIKit, we could do this with `presentViewController:animated:completion:` [function](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621380-presentviewcontroller). However, using SwiftUI, we need to twist our thinking towards using view or environment state, as the modal view is now called a sheet."/><meta name="og:description" content="When presenting a small piece of extra information on the screen, showing a modal view is essential. With UIKit, we could do this with `presentViewController:animated:completion:` [function](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621380-presentviewcontroller). However, using SwiftUI, we need to twist our thinking towards using view or environment state, as the modal view is now called a sheet."/><meta name="og:site_name" content="Kristaps Grinbergs - iOS and Apple technology developer. Startup founder. Conference speaker."/><meta name="og:title" content="Kristaps Grinbergs - iOS and Apple technology developer. Startup founder. Conference speaker."/><meta name="og:description" content="Kristaps Grinbergs - iOS and Apple technology developer. Startup founder. Conference speaker."/><meta name="og:image" content="linkedin.png"/><meta name="og:type" content="website"/><meta name="og:url" content="https://kristaps.me"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@fassko"/><meta name="twitter:title" content="Kristaps Grinbergs"/><meta name="twitter:description" content="Kristaps Grinbergs - iOS and Apple technology developer. Startup founder. Conference speaker."/><meta name="twitter:image" content="fb-og.png"/><link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Kristaps Grinbergs"/></head><body><header class="header"><div class="header-wrapper"><div class="main-title"><a href="/">Kristaps Grinbergs</a></div><nav class="nav-container"><nav><ul class="nav"><li class="nav-item"><a href="/">home</a></li><li class="nav-item"><a href="/blog">blog</a></li><li class="nav-item"><a href="/talks">talks</a></li><li class="nav-item"><a href="/about">about</a></li></ul></nav></nav></div></header><div class="wrapper"><section class="blog-list"><div class="blog-item"><h1 class="blog-title">How to deal with modal views (a.k.a. sheets) with SwiftUI</h1><div class="blog-date">22 Nov 2020</div><div class="blog-content"><p>When presenting a small piece of extra information on the screen, showing a modal view is essential. With UIKit, we could do this with <code>presentViewController:animated:completion:</code> <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621380-presentviewcontroller">function</a>.</p><p>However, using SwiftUI, we need to twist our thinking towards using view or environment state, as the modal view is now called a sheet.<br><br>Let's check it out in detail.</p><blockquote><p>Thank you <a href="https://twitter.com/janiskirsteins">Jānis Kiršteins</a> for a great <a href="https://twitter.com/janiskirsteins/status/1337398222386434053">suggestion</a> to use <code>@ViewBuilder</code> instead of <code>AnyView</code>.</p></blockquote><h2>Open modal view (a.k.a. sheet)</h2><p>SwiftUI sheets help us show a modal view to users. <code>sheet</code> is an instance method to the <a href="https://developer.apple.com/documentation/swiftui/view-presentation">View Presentation</a>. It describes how we can show our SwiftUI views, covering specific user journey scenarios.</p><p>Let's say we want to display information about our app to users.</p><p>Firstly, we need to define whether the app should show a modal view or not, binding this with the <code>Bool</code> value.</p><p>The keyword here is 'should' because once we dismiss, the presented view value is set back to <code>false</code>. This value is decorated with a <code>@State</code> property wrapper, or could come from <code>ObservableObject</code> ViewModel. For simplicity reasons, we're not going to talk about ViewModels in this post.</p><p>Secondly, we need to change the view or, in some cases, the environment state. Once we are using the <code>@State</code> property wrapper, we can just set it to <code>true</code> and SwiftUI will do the rest to present the modal view.</p><p>Let’s look how we can do it in the code:</p><pre><code><span class="keyword">struct</span> ContentView: <span class="type">View</span> {
  <span class="keyword">@State var</span> showInfoModalView: <span class="type">Bool</span> = <span class="keyword">false
  
  var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(spacing: <span class="number">50</span>) {
      <span class="type">Text</span>(<span class="string">"Main View"</span>)
        .<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)
      
      <span class="type">Button</span>(action: {
        showInfoModalView = <span class="keyword">true</span>
      }, label: {
        <span class="type">Label</span>(<span class="string">"Show Info View"</span>, systemImage: <span class="string">"info.circle"</span>)
      })
    }
    .<span class="call">sheet</span>(isPresented: $showInfoModalView) {
      <span class="type">InfoView</span>()
    }
  }
}
</code></pre><p>When we run the app, we can now open the modal view and see the detailed information.</p><img src="/assets/img/modal-view-swiftui/show-modal-view.gif" alt="Show Modal View"/><h2>Close modal view programmatically</h2><p>Our app users can simply slide the modal view down, and it will hide with a nice animation. Set the state to false to hide this from the view responsible for showing the modal view.</p><p>Now is the question of how to do it from the modal view itself? We have these two options at our disposal:</p><ul><li>using <code>@Environment</code> property <code>presentationMode</code>;</li><li>passing the state to the modal view as binding.</li></ul><h3>Using Environment</h3><p>Property wrapper <code>@Environment</code> allows us to read and change the values of the view environment state. To hide the modal view, we need to change the <code>presentationMode</code> property. At first, we need to define our view. To do this, we add it to the modal view properties. To dismiss the modal view, we need to alter the presentation mode wrapped value.</p><pre><code><span class="keyword">struct</span> InfoView: <span class="type">View</span> {
  <span class="keyword">@Environment</span>(\.<span class="property">presentationMode</span>) <span class="keyword">var</span> presentationMode
  
  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(spacing: <span class="number">50</span>) {
      <span class="type">Text</span>(<span class="string">"Information view."</span>)
        .<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)
      
      <span class="type">Button</span>(action: {
        presentationMode.<span class="property">wrappedValue</span>.<span class="call">dismiss</span>()
      }, label: {
        <span class="type">Label</span>(<span class="string">"Close"</span>, systemImage: <span class="string">"xmark.circle"</span>)
      })
    }
  }
}
</code></pre><p>This method is quite cumbersome, and dealing with environmental properties can cause accidental issues that are difficult to track down and debug.</p><h3>Using a binding</h3><p>Using a binding between the view that is presenting the modal view and the modal view itself is another method to hide it from the code.</p><p>First, we need to add a new property to the modal view structure using <code>@Binding</code> property wrapper. This describes that this value comes from somewhere else outside the view scope.</p><pre><code><span class="keyword">struct</span> InfoView: <span class="type">View</span> {
  <span class="keyword">@Binding var</span> isPresented: <span class="type">Bool</span>
  
  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(spacing: <span class="number">50</span>) {
      <span class="type">Text</span>(<span class="string">"Information view."</span>)
        .<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)
      
      <span class="type">Button</span>(action: {
        isPresented = <span class="keyword">false</span>
      }, label: {
        <span class="type">Label</span>(<span class="string">"Close"</span>, systemImage: <span class="string">"xmark.circle"</span>)
      })
    }
  }
}
</code></pre><p>Now when we are initializing the <code>ModalView</code> we need to pass the <code>isPresented</code>:</p><pre><code>.<span class="call">sheet</span>(isPresented: $showInfoModalView) {
  <span class="type">InfoView</span>(isPresented: $showInfoModalView)
}
</code></pre><p>Using this approach, we are sure that this variable only belongs to these two views. It is more straightforward to test and debug.</p><h2>Multiple sheets on one SwiftUI view</h2><p>Now we know how to present a modal view, but how can we show multiple modal views?</p><p>Imagine we would like to present information about the app and the settings view from the primary app view.<br><br>We can do this using these two approaches:</p><ul><li>using multiple sheets presenting functions;</li><li>using <code>Identifiable</code> enum to keep the state of the currently shown sheet.</li></ul><h3>Multiple sheet functions in one SwiftUI view</h3><p>We can attach <code>sheet</code> function to any SwiftUI view or control, for instance to the <code>Button</code>:</p><pre><code><span class="keyword">struct</span> ContentView: <span class="type">View</span> {
  <span class="keyword">@State var</span> showInfoModalView: <span class="type">Bool</span> = <span class="keyword">false
  @State var</span> showSettingsModalView: <span class="type">Bool</span> = <span class="keyword">false
  
  var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(spacing: <span class="number">50</span>) {
      <span class="type">Text</span>(<span class="string">"Main View"</span>)
        .<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)
      
      <span class="type">Button</span>(action: {
        showInfoModalView = <span class="keyword">true</span>
      }, label: {
        <span class="type">Label</span>(<span class="string">"Show Info View"</span>, systemImage: <span class="string">"info.circle"</span>)
      })
      .<span class="call">sheet</span>(isPresented: $showInfoModalView) {
        <span class="type">InfoView</span>()
      }
      
      <span class="type">Button</span>(action: {
        showSettingsModalView = <span class="keyword">true</span>
      }, label: {
        <span class="type">Label</span>(<span class="string">"Show Settings View"</span>, systemImage: <span class="string">"gear"</span>)
      })
      .<span class="call">sheet</span>(isPresented: $showSettingsModalView) {
        <span class="type">SettingsView</span>()
      }
    }
  }
}
</code></pre><p>It can be fine to have two buttons, but let's say we have more than that. It can get quite messy, so we should deal with many <code>@State</code> variables.</p><h3>Using enumeration of all modal views</h3><p>If we look at Apple's official documentation, there is another <a href="https://developer.apple.com/documentation/swiftui/view/actionsheet(item:content:">function</a>) to show a sheet. Let's try to use it.</p><p>At first, we will define an <code>enum</code> with all modal view options:</p><pre><code><span class="keyword">enum</span> Sheet: <span class="type">Identifiable</span> {
  <span class="keyword">case</span> info
  <span class="keyword">case</span> settings
}
</code></pre><p>Now we can use this in the SwiftUI view. We need a new <code>@State</code> variable with the optional type <code>Sheet</code> and to use this to determine which modal view we would like to present.</p><pre><code><span class="keyword">enum</span> Sheet: <span class="type">Identifiable</span> {
  <span class="keyword">case</span> info
  <span class="keyword">case</span> settings
  
  <span class="keyword">var</span> id: <span class="type">Int</span> {
    hashValue
  }
}

<span class="keyword">struct</span> ContentView: <span class="type">View</span> {
  <span class="keyword">@State var</span> activeSheet: <span class="type">Sheet</span>?
  
  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(spacing: <span class="number">50</span>) {
      <span class="type">Text</span>(<span class="string">"Main View"</span>)
        .<span class="call">font</span>(.<span class="dotAccess">largeTitle</span>)
      
      <span class="type">Button</span>(action: {
        activeSheet = .<span class="dotAccess">info</span>
      }, label: {
        <span class="type">Label</span>(<span class="string">"Show Info View"</span>, systemImage: <span class="string">"info.circle"</span>)
      })
      
      <span class="type">Button</span>(action: {
        activeSheet = .<span class="dotAccess">settings</span>
      }, label: {
        <span class="type">Label</span>(<span class="string">"Show Settings View"</span>, systemImage: <span class="string">"gear"</span>)
      })
    }
    .<span class="call">sheet</span>(item: $activeSheet) { sheet <span class="keyword">in
      switch</span> sheet {
      <span class="keyword">case</span> .<span class="dotAccess">info</span>:
        <span class="type">InfoView</span>()
      <span class="keyword">case</span> .<span class="dotAccess">settings</span>:
        <span class="type">SettingsView</span>()
      }
    }
  }
}
</code></pre><p>We don't need to stop here. We can declutter this code by adding a computed property to <code>Sheet</code> enum:</p><pre><code><span class="keyword">extension</span> <span class="type">Sheet</span> {
  <span class="keyword">@ViewBuilder
  var</span> modalView: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="keyword">switch self</span> {
    <span class="keyword">case</span> .<span class="dotAccess">info</span>:
      <span class="type">InfoView</span>()
    <span class="keyword">case</span> .<span class="dotAccess">settings</span>:
      <span class="type">SettingsView</span>()
    }
  }
}
</code></pre><p>Then we can use it when opening the sheet:</p><pre><code>   .<span class="call">sheet</span>(item: $activeSheet) { $0.<span class="property">modalView</span> }
</code></pre><p>Using the fancy new keypaths functionality in closures, we can simplify this even more:</p><pre><code>   .<span class="call">sheet</span>(item: $activeSheet, content: \.<span class="property">modalView</span>)
</code></pre><p>One caveat to this approach is that we need to change part of our process to hide the view from the code. To do this, we set it to <code>nil</code> instead of <code>false</code>.</p><p>This approach is much safer, because we use the enumeration type to keep everything well organized.</p><p>Let's see it in action.</p><img src="/assets/img/modal-view-swiftui/show-multiple-modal-views-close.gif" alt="Show Modal View"/><h2>TL;DR</h2><p>Modal views in SwiftUI are presented using the sheet modifier on a view or control. The simplest way is to have <code>@State</code> property to indicate when it should be visible.</p><p>To hide the modal view, we can use the environment parameter or pass a binding to the modal view object. Showing multiple sheets can be achieved either with multiple sheet modifiers or using an object with all possible modal view enumerations.</p><h2>Links</h2><ul><li><a href="https://github.com/fassko/ModalViewApp">Demo app - there are multiple branches for everything we talked about</a></li></ul><ul><li><a href="https://developer.apple.com/documentation/swiftui/view/sheet(ispresented:ondismiss:content:">Apple official documention</a>)</li><li><a href="https://www.simpleswiftguide.com/how-to-present-sheet-modally-in-swiftui/">How to present a sheet modally in SwiftUI</a></li><li><a href="https://swiftwithmajid.com/2019/07/24/alerts-actionsheets-modals-and-popovers-in-swiftui/">Alerts, Action Sheets, Modals and Popovers in SwiftUI</a></li><li><a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-present-a-new-view-using-sheets">How to present a new view using sheets</a></li><li><a href="https://masilotti.com/multiple-sheets-swiftui/">How to manage multiple sheets in SwiftUI</a></li><li><a href="https://stackoverflow.com/questions/58837007/multiple-sheetispresented-doesnt-work-in-swiftui">Thread in StackOverflow</a></li><li><a href="https://www.youtube.com/watch?feature=player_embedded&v=7dZfpAn_P2g">Enums for Multiple Sheets</a></li><li><a href="https://github.com/davdroman/MultiSheet">MultiSheet</a></li></ul></div></div></section></div><footer class="footer">Copyright © Kristaps Grinbergs. 2020</footer></body></html>